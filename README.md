# gqless-hook

[![Build Status](https://travis-ci.com/dai-shi/gqless-hook.svg?branch=master)](https://travis-ci.com/dai-shi/gqless-hook)
[![npm version](https://badge.fury.io/js/gqless-hook.svg)](https://badge.fury.io/js/gqless-hook)
[![bundle size](https://badgen.net/bundlephobia/minzip/gqless-hook)](https://bundlephobia.com/result?p=gqless-hook)

Yet another React hook for gqless

## Introduction

[gqless](https://github.com/samdenty/gqless) is a library for
GraphQL without writing queries.
It includes a HoC-based React binding library.

This library is a third-party hook-based React binding library.
It's proof of concept at this moment and many features are not
yet implementetd: multi hooks, partial loading, polling,
variables, mutation, subscription, and so on.
As of its nature, the fetch pattern is Fetch-on-Render even in Concurrent Mode.

## Install

```bash
npm install gqless-hook gqless
```

## Usage

### Setup

Create .gqlessrc.json:

```json
{
  "url": "https://www.graphqlhub.com/graphql",
  "outputDir": "./src/graphql"
}
```

Generate client:

```bash
gqlite generate
```

### Example Code

```tsx
import React, { Suspense } from 'react';

import { useQuery } from 'gqless-hook';

import { client, HackerNewsItem } from './graphql';

type Props = {
  story: HackerNewsItem;
};

const Story: React.FC<Props> = ({ story }) => (
  <article>
    <h2>
      <a href={story.url || ''}>{story.title}</a>
    </h2>
    <div>
      <span>{story.score} points</span>
      <a href={`https://news.ycombinator.com/user?id=${story.by.id}`}>
        {story.by.id}
      </a>
      <a href={`https://news.ycombinator.com/item?id=${story.id}`}>
        {story.descendants} comments
      </a>
    </div>
  </article>
);

const TopStories: React.FC = () => {
  const query = useQuery(client);
  return (
    <div>
      {query.hn?.topStories({ limit: 25 })?.map((story) => (
        story && <Story key={story.id} story={story} />
      ))}
    </div>
  );
};

export const App = () => (
  <Suspense fallback={<div>Loading...</div>}>
    <TopStories />
  </Suspense>
);
```

## API

<!-- Generated by documentation.js. Update this documentation by updating the source code. -->

### useQuery

useQuery

This hook returns query from gqless.

#### Parameters

-   `client` **Client&lt;Data>** 

#### Examples

```javascript
import { useQuery } from 'gqless-hook';
import { client } from '../graphql'; // generated by @gqless/cli

const Component = () => {
  const query = useQuery(client);
  return (
    <div>{query.foo}</div>
  );
};
```

Returns **Data** 

## Examples

The [examples](examples) folder contains working examples.
You can run one of them with

```bash
PORT=8080 npm run examples:01_graqhqlhub
```

and open <http://localhost:8080> in your web browser.

You can also try them in codesandbox.io:
[01](https://codesandbox.io/s/github/dai-shi/gqless-hook/tree/master/examples/01_graphqlhub)
