import{useReducer as e,useRef as n,useCallback as t,useEffect as r,useLayoutEffect as o}from"react";import{accessorInterceptors as c}from"gqless";var i="undefined"==typeof window||/ServerSideRendering/.test(window.navigator&&window.navigator.userAgent)?function(e){return e()}:o,u=function(o){var u=e(function(e){return e+1},0)[1],d=n(!1);if(d.current)throw new Promise(function(e){o.scheduler.commit.onFetched.then(e)});var a=t(function(){d.current=!0},[]),f=t(function(){d.current=!1},[]);o.scheduler.commit.onActive.then(a),o.scheduler.commit.onFetched.then(f),i(function(){d.current?u():o.scheduler.commit.accessors.size>0&&(d.current=!0,u())});var m=t(function(){d.current||u()},[]),s=t(function(e){e.onDataChange.then(m)},[m]);c.add(s);var h=setTimeout(function(){c.delete(s)},5e3);return r(function(){clearTimeout(h),c.delete(s)}),o.query};export{u as useQuery};
//# sourceMappingURL=index.esm.js.map
