var e=require("react"),r=require("gqless"),t="undefined"==typeof window||/ServerSideRendering/.test(window.navigator&&window.navigator.userAgent)?function(e){return e()}:e.useLayoutEffect;exports.useQuery=function(n){var c=e.useReducer(function(e){return e+1},0)[1],u=e.useRef(!1);if(u.current)throw new Promise(function(e){n.scheduler.commit.onFetched.then(e)});var o=e.useCallback(function(){u.current=!0},[]),s=e.useCallback(function(){u.current=!1},[]);n.scheduler.commit.onActive.then(o),n.scheduler.commit.onFetched.then(s),t(function(){u.current?c():n.scheduler.commit.accessors.size>0&&(u.current=!0,c())});var i=e.useCallback(function(){u.current||c()},[]),a=e.useCallback(function(e){e.onDataChange.then(i)},[i]);r.accessorInterceptors.add(a);var f=setTimeout(function(){r.accessorInterceptors.delete(a)},5e3);return e.useEffect(function(){clearTimeout(f),r.accessorInterceptors.delete(a)}),n.query};
//# sourceMappingURL=index.js.map
