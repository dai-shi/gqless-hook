!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("react"),require("gqless")):"function"==typeof define&&define.amd?define(["exports","react","gqless"],t):t((e=e||self).gqlessHook={},e.react,e.gqless)}(this,function(e,t,n){var r="undefined"==typeof window||/ServerSideRendering/.test(window.navigator&&window.navigator.userAgent)?function(e){return e()}:t.useLayoutEffect;e.useQuery=function(e){var c=t.useReducer(function(e){return e+1},0)[1],o=t.useRef(!1);if(o.current)throw new Promise(function(t){e.scheduler.commit.onFetched.then(t)});var u=t.useCallback(function(){o.current=!0},[]),s=t.useCallback(function(){o.current=!1},[]);e.scheduler.commit.onActive.then(u),e.scheduler.commit.onFetched.then(s),r(function(){o.current?c():e.scheduler.commit.accessors.size>0&&(o.current=!0,c())});var i=t.useCallback(function(){o.current||c()},[]),a=t.useCallback(function(e){e.onDataChange.then(i)},[i]);n.accessorInterceptors.add(a);var f=setTimeout(function(){n.accessorInterceptors.delete(a)},5e3);return t.useEffect(function(){clearTimeout(f),n.accessorInterceptors.delete(a)}),e.query}});
//# sourceMappingURL=index.umd.js.map
